<strong><span style="font-size:28px;">Magento 2 Schnittstelle - Installation &amp; Einrichtung</span></strong><br /><br />Mit der Magento 2 Schnittstelle k&ouml;nnen Sie Xentral mit der Shopsoftware Magento 2.x verbinden.<br /><br />&nbsp;<div class="video-box youtube-video"><span class="wiki-text"><iframe allowfullscreen="" frameborder="0" src="https://www.youtube.com/embed/49PICIq3XP8"></iframe></span><h1><span class="wiki-text">Features der Schnittstelle</span></h1><ul><li><span class="wiki-text">Auftr&auml;ge aus Magento 2.x abholen</span></li><li><span class="wiki-text">Auftragsstatus bei Versand umstellen inkl. Meldung Trackingnummer</span></li><li><span class="wiki-text">Artikel einzeln von Xentral nach Magento oder von Magento nach Xentral &uuml;bertragen</span></li><li><span class="wiki-text">Meldung aktueller Lagerzahlen bei Bestands&auml;nderungen</span></li><li><span class="wiki-text">Artikelfreifelder werden zu Custom Attributes &uuml;bertragen</span><br />&nbsp;</li></ul><h2><span class="wiki-text">&Uuml;bertragung der Marketingsperre</span></h2>Es ist in Xentral m&ouml;glich das Feld &quot;Marketingsperre&quot;&nbsp;<span class="wiki-text"> durch einen Import zu setzen. Sobald ein Kunde angegeben hat, dass er kein &quot;Newsletter&quot; erhalten m&ouml;chte, kann diese Information &uuml;ber den Button &quot;Importieren von ...&quot; importiert werden.<br /><br /><br /><img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=shopimporter_magento2&amp;fileid=1" /><br /><br /><br />Dazu muss in der Online Shop - Schnittstelle der Haken &quot;manuelle Adress&uuml;bertragung&quot; gesetzt werden, ansonsten wird der Button nicht in der Adresse angezeigt.<br /><br /><br /><img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=shopimporter_magento2&amp;fileid=2" /></span><h1><br /><br /><span class="wiki-text">Installation der Schnittstelle</span></h1><h2><br /><span class="wiki-text">API Benutzer in Magento 2 erstellen</span></h2><br /><span class="wiki-text"><span style="font-size:16px;"><strong>Schritt 1: Benutzer anlegen</strong></span><br /><br />In Magento muss ein neuer Benutzer unter System &rarr; All Users &rarr; Add New User anlegen werden.<br /><br /><img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=shopimporter_magento2&amp;fileid=3" /><br /><br /><br /><span style="font-size:16px;"><strong>Schritt 2: Account Informationen ausf&uuml;llen</strong></span></span><ul><li><span class="wiki-text">Alle Daten ausf&uuml;llen - f&uuml;r Xentral ben&ouml;tigen Sie die Felder &quot;User Name&quot; und &quot;New Password&quot;</span></li><li><span class="wiki-text">Unten das Passwort des eigenen Benutzers eingeben und mit &quot;Save User&quot; oben die &Auml;nderungen speichern</span></li></ul><br /><span class="wiki-text"><img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=shopimporter_magento2&amp;fileid=4" /><br /><br /><br /><br /><span style="font-size:16px;"><strong>Schritt 3: User Role &uuml;berpr&uuml;fen</strong></span><br /><br />Unter &quot;User Role&quot; sollte der Benutzer als Administrator gekennzeichnet sein.<br /><br /><img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=shopimporter_magento2&amp;fileid=5" /></span><h2><br /><span class="wiki-text">Shopschnittstelle in Xentral anlegen</span></h2><br /><span class="wiki-text"><span style="font-size:16px;"><strong>1. Shopschnittstelle anlegen</strong></span><br /><br />Unter Administration &rarr; Einstellungen &rarr; Online-Shops &rarr; NEU kann man nach Magento 2 suchen:<br /><br /><img alt="" src="./index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=shopimporter_magento2&amp;fileid=3806" style="width: 1836px; height: 458px;" /><br /><br /><br /><span style="font-size:16px;"><strong>2. Magento 2 Daten eingeben</strong></span><br /><br />Vergeben Sie einen Shop-Namen und stellen Sie f&uuml;rs Erste die Einstellungen wie im Screenshot ein. Danach tragen Sie Ihre Magento Daten in die beschriebenen Felder ein.<br /><br /><img alt="" src="./index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=shopimporter_magento2&amp;fileid=3807" style="width: 1828px; height: 748px;" /><br /><br /><br /><span style="font-size:16px;"><strong>3. Verbindung pr&uuml;fen</strong></span><br /><br />Am Schluss &uuml;berpr&uuml;fen Sie mit einem Klick auf &quot;Verbindung pr&uuml;fen&quot; ob die Anbindung geklappt hat:<br /><br /><img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=shopimporter_magento2&amp;fileid=8" /><br /><br /><br />Sollte es zu einem Fehler kommen &uuml;berpr&uuml;fen Sie bitte, ob d</span><span class="wiki-text">ie Zugangsdaten aus Magento korrekt in Xentral hinterlegt wurden.</span><br /><span class="wiki-text">&nbsp;</span><br />&nbsp;<h1><span class="wiki-text">Einstellungen der Schnittstelle</span></h1><p>Unter den Zugangsdaten befindet sich eine Reihe von Einstellungen, die speziell bei Magento2-Shops relevant sind.<br /><br /><img alt="" src="./index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=shopimporter_magento2&amp;fileid=3542" style="width: 1200px; height: 311px;" /><br />&nbsp;</p><ul><li><strong>St&uuml;cklisten-Unterartikel</strong> <strong>automatisch mitexportieren </strong>&rarr; Wenn aktiviert, dann werden die Unterartikel mitexportiert, wenn eine St&uuml;ckliste zum Shop exportiert wird.</li><li><strong>Status &quot;zum Abholen&quot;</strong> &rarr; Status der Auftr&auml;ge, die Xentral abholen soll.</li><li><strong>Status &quot;in Bearbeitung&quot;</strong> &rarr; Status, auf den Auftr&auml;ge nach der Abholung zu Xentral, gesetzt werden sollen.</li><li><strong>Status &quot;Abgeschlossen&quot; </strong>&rarr; Status, auf den Bestellung umgestellt wird, wenn Auftrag in Xentral verarbeitet wurde. Standardm&auml;&szlig;ig &quot;completed&quot;, wenn nichts eingetragen wird.</li><li><strong>Attributecodes f&uuml;r Eigenschaften</strong> &rarr; Beim Artikelimport von Magento zu Xentral k&ouml;nnen die Attribute des Artikels direkt als Eigenschaften mitimportiert werden. Hierzu muss aber in diesem Feld anhand der Attributcodes aus dem Magento-Backend festgelegt werden, welche Attribute importiert werden sollen.</li><li><strong>Normale / Erm&auml;&szlig;igte Steuer ID</strong>: Wenn beim Export von Artikeln von Xentral zu Magento betehende Steuers&auml;tze in Magento verwendet werden sollen (anstatt das Xentral die Steuers&auml;tze 7% oder 19% neu anlegt), m&uuml;ssen hier die IDs der Steuers&auml;tze aus dem Magento Backend eingetragen.</li><li><strong>Wurzelkategorie ID</strong> &rarr; Beim Export von Artikel bzw. des Artikelbaums von Xentral zu Magento 2, werden diese in die hier eingestellte Wurzelkategorie von Magento2 &uuml;bertragen.</li><li><strong>Attributtyp bei Bedarf anpassen</strong> &rarr; Beim Export von Artikeln von Xentral zu Magento kann der Typ des Attributs in Magento nur angepasst werden, wenn das Attribut gel&ouml;scht und nochmal neu angelegt wird. Dieser Prozess kann durch diese Einstellung bewirkt werden.</li></ul><h2><br /><span class="wiki-text">Weitere Einstellungen und Mapping </span></h2><p><span class="wiki-text">Wie Sie die weiteren Einstellungen vornehmen sowie das Zahlungsweisen- und Versandarten-Mapping vornehmen, erfahren Sie im Artikel <a href="index.php?module=wiki&amp;action=list&amp;cmd=onlineshops" target="_blank">Online Shops: Einstellungen</a>. </span></p><h1><br />Auftr&auml;ge importieren</h1><h2><span class="wiki-text">Abholmodus</span></h2><span class="wiki-text">Beim Auftragsimport k&ouml;nnen Sie in Magento 2 zwischen zwei Abholmodi w&auml;hlen, der Abholung nach Auftragsstatus oder -nummer.<br /><br />Sollen die Auftr&auml;ge ab einer bestimmten Bestellnummer abgeholt werden, k&ouml;nnen Sie &quot;ab Nummer&quot; ausw&auml;hlen und unten die Bestellnummer, ab der die Auftr&auml;ge abgeholt werden sollen. Xentral wird dann ab einschlie&szlig;lich diesem Auftrag Bestellungen importieren.<br /><br /><br /><img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=shopimporter_magento2&amp;fileid=9" /><br /><br />Bitte beachten Sie, dass dann die Bestell-ID eingetragen werden muss, die im Magento-Backend in der URL des Auftrags zu finden ist bzw. die als Wert 1 unten im Log auftaucht. Die ebenfalls so genannte &quot;Bestell-ID&quot; in der Auftrags&uuml;bersicht im Magento 2-Backend entspricht dem Wert 2 im Log und kann hier nicht erkannt werden.<br /><br /><br /><img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=shopimporter_magento2&amp;fileid=10" /><br /><br />Als Internetnummer wird dann allerdings der Wert 2 in den Auftr&auml;gen eingetragen, weil er in der Oberfl&auml;che von Magento auch die eigentliche Bestellnummer darstellt.<br /><br />Soll stattdessen nach Auftragsstatus abgeholt werden, so kann man unten die Bezeichungen der beiden Stati aus Magento eintragen. Xentral wei&szlig; dann, Auftr&auml;ge mit welchem Status abgeholt werden sollen und auf welchen Status die Auftr&auml;ge im Shop umgestellt werden sollen, sobald sie verarbeitet wurden.<br /><br /><img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=shopimporter_magento2&amp;fileid=11" /></span><br /><br />&nbsp;<h2><span class="wiki-text">Kundenkommentar importieren</span></h2>Der Magento 2-Importer kann den Kundenkommentar im Warenkorb eines Auftrags als <strong>Freitext</strong> in den Auftrag in Xentral &uuml;bernommen werden.<br />Hat der Kunde mehrere Kommentare hinterlassen, wird allerdings nur der <strong>erste</strong> Kommentar &uuml;bertragen, da die Meldungen zum Auftragsstatus in der gleichen Datenstruktur stehen. Es best&uuml;nde sonst die Gefahr, dass Statusmeldungen als Kommentar interpretiert werden.<br /><span class="wiki-text">&nbsp;</span><h1><span class="wiki-text">Artikel-Attribute</span></h1><span class="wiki-text">Bei der Verwendung von Attributen ist immer das Attributset relevant. Um das Attributset auszuw&auml;hlen gibt es zwei M&ouml;glichkeiten:</span><ul><li><span class="wiki-text">Die ID des Attributs bei der Eigenschaft mit dem Namen &#39;<strong>AttributeSetID&#39;</strong> hinterlegen</span></li><li><span class="wiki-text">Den Namen des zu verwendenden Sets bei der Eigenschaft mit dem Namen &#39;<strong>AttributeSetName</strong>&#39; hinterlegen</span></li></ul><span class="wiki-text">Das Attributset sehen Sie in Magento in der Artikeltabelle:<br /><br /><img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=shopimporter_magento2&amp;fileid=12" /><br /><br /><br />Mapping in Xentral:<br /><br /><br /><img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=shopimporter_magento2&amp;fileid=13" /><br /><br />Wenn kein Attributset in den Eigenschaften festgelegt wird, wird der Artikel standardm&auml;&szlig;ig der Default-Gruppe zugewiesen.Wichtig: Bei Attributsets gibt es immer eine Ausnahme f&uuml;r Matrixartikel. Hier ist es so, dass das Attributset, welches aus den Matrixeigenschaften gebildet wird, priorisiert wird.<br /><br /><u>Wichtig</u>: Bei Attributsets gibt es immer eine Ausnahme f&uuml;r Matrixartikel. Hier ist es so, dass das Attributset, welches aus den Matrixeigenschaften gebildet wird, priorisiert wird.</span><h2><br /><span class="wiki-text">Artikel-Freifelder &uuml;bertragen</span></h2><span class="wiki-text">Die Verkn&uuml;pfung funktioniert &uuml;ber Attribut Codes. Die Freifelder k&ouml;nnen in Xentral frei benannt werden und werden vom Importer dann auf einen g&uuml;ltigen Attribut Code umgewandelt (z.B. aus Farbe Au&szlig;en wird farbe_aussen).<br /><br />Sollen existierende Freifelder zwischen Xentral und Magento verkn&uuml;pft werden, so muss zun&auml;chst der Scope bzw. G&uuml;ltigkeitsbereich des Attributs in Magento auf Global gestellt werden. Dies kann man in Magento unter Stores &rarr; Attributes &rarr; Product im jeweiligen Attribut eingestellt werden. Dort ist die Einstellung unter <strong>Advanced Attribute Properties</strong> zu finden.<br /><br /><img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=shopimporter_magento2&amp;fileid=14" /><br /><br /><br />Werden Attributes in Magento neu durch einen Export von Xentral angelegt, wird der Scope automatisch auf Global gesetzt.<br />Dabei gilt es zu beachten, dass die Bezeichnungen der Freifelder in Xentral so gew&auml;hlt werden, dass auch nach der Umwandlung zu Attribut Codes keine ungewollten Matchings entstehen.</span><br />&nbsp;<h2><span class="wiki-text">Attributmapping</span></h2><span class="wiki-text">Im Reiter Attributmapping k&ouml;nnen die Eigenschaften sowie Freifelder eines Artikels aus Xentral auf Attributtypen von Magento2 gemappt werden. Das erm&ouml;glich eine genaue &Uuml;bertragung von Artikeleigenschaften und -freifelder in den gew&uuml;nschten Attributtyp von Magento.<br /><br /><img alt="" src="./index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=shopimporter_magento2&amp;fileid=3543" style="width: 1200px; height: 210px;" /></span><br />&nbsp;<ul><li><strong>Attribut</strong>&nbsp;&rarr; Hier steht der Attributcode</li><li><strong>Parameter</strong>&nbsp;&rarr; F&uuml;r Select und Multiselect kann man eine Parameterliste &uuml;bergeben</li></ul><br />Beim Anlegen der Attribute werden die Teile dann als Optionen angelegt. Einzelne Werte werden dabei durch Pipes getrennt. Au&szlig;erdem ist es m&ouml;glich einen Parameter durch anh&auml;ngen von <strong>;1 </strong>als Standardoption zu kennzeichnen. Wenn nichts, oder <strong>;0 </strong>an den jeweiligen Wert angehangen werden ist das Wert als nicht Default gekennzeichnet.<div class="image-hover" style="float: none;">&nbsp;</div>Die Parameter werden nur bei neu angelegten Attributen &uuml;bertragen. Es ist nicht m&ouml;glich, im Nachhinein einem Attribut einen Parameter &uuml;ber diese Mechanik anzuh&auml;ngen. Wenn ein Artikel mit einer Eigenschaft &uuml;bertragen wird, deren Wert noch nicht in der Optionsliste des Attributs vorhanden ist, wird der Wert daraufhin als Option vom Importer angelegt.<br /><br />Wenn ein Attribut im Shop existiert, aber einen anderen Typ hat, als im erweiterten Mapping eingestellt ist wird bei gesetzter Option <strong>&quot;Attributtyp bei Bedarf anpassen&quot; </strong>(siehe oben) das Attribut aus Magento gel&ouml;scht und neu angelegt.<br />Ein &Auml;ndern der Art des Attributes ist seitens Magento nicht m&ouml;glich. Wenn diese Option nicht gesetzt ist, wird der Attributtyp nicht ge&auml;ndert.<br /><br />Ohne Mapping werden alle Attribute als Typ <strong>&quot;Text&quot;</strong> angelegt. Das Mapping bezieht sich auf den Attributcode, den Xentral &uuml;bertr&auml;gt. Das bedeutet, es spielt keine Rolle ob es sich um Eigenschaften oder Freifelder handelt, ausschlaggebend ist der Attributcode.<br /><br /><strong><span style="color:#e74c3c;">Wichtig</span>: Wenn ein Attribut gel&ouml;scht wird, dann werden auch s&auml;mtliche Daten zu dem Attribut gel&ouml;scht! Sie m&uuml;ssen dann bei allen Artikeln neu &uuml;bertragen werden.</strong><br /><br /><br />&nbsp;</div>