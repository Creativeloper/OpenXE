<span style="font-size:28px;"><strong>Berichte erstellen</strong></span><br />Hier k&ouml;nnen Sie sich eigene Berichte mit Hilfe von SQL Statements anlegen und als PDF/CSV exportieren, oder per FTP und E-Mail versenden.<br /><br /><img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=berichte&amp;fileid=19" width="700" /><h1>Feldeinstellungen</h1>Im Reiter &quot;Einstellungen&quot; werden die ben&ouml;tigten Informationen f&uuml;r den Bericht eingetragen.<br />In den Feldern ist dabei Folgendes einzugeben:<ul><li>Name: Der Name des Berichts (kann frei gew&auml;hlt werden)</li><li>Projekt (optional): Projekt des Berichts</li><li>Beschreibung (optional): Beschreibung, was der Bericht anzeigt</li><li>Variablen (optional): Definition von Variablen, die dann im SQL-Statement dementsprechend ersetzt werden</li><li>Struktur: SQL-Statement, dass die Struktur des Berichts festlegt</li><li>Spaltenname: Bezeichnung der Spalten, in denen die Daten auftauchen (z.B. Datum, Kunde, Betrag)</li><li>Spaltenbreite (optional): Spaltenbreite in Millimetern (Gesamtbreite betr&auml;gt 190mm)</li><li>Spaltenausrichtung (optional): Ausrichtung des Textes in allen Feldern der Spalte, R (rechtsb&uuml;ndig), L (linksb&uuml;ndig), oder C (zentriert)</li><li>Interne Bemerkung (optional): Interne Anmerkung (taucht nicht im Bericht auf)</li></ul><h1>Variablen</h1>Es ist auch m&ouml;glich Variablen in Berichten zu deklarieren und diese im SQL - Statement zu nutzen.<br /><br />Die entsprechende Syntax sieht dann so aus (Semikolon am Ende nicht vergessen):{DATUMVON} = 2018-10-01;Im Bericht werden die Variablen folgenderma&szlig;en eingef&uuml;gt:<img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=berichte&amp;fileid=20" /><h1>FTP-&Uuml;bertragung und E-Mail</h1>Erstellte Berichte k&ouml;nnen &uuml;ber FTP &uuml;bertragen sowie in regelm&auml;&szlig;igen Abst&auml;nden und zu bestimmten Zeitpunkten per E-Mail versendet werden.<br /><br />Die Funktion muss dazu aktiviert und alle Felder gef&uuml;llt werden.<ul><li>E-Mail Empf&auml;nger &rarr; E-Mail-Adresse, an die der Bericht versendet werden soll</li><li>E-Mail Betreffzeile &rarr; Betreff, den die E-Mail haben soll</li><li>Uhrzeit &rarr; Uhrzeit, zu dem die E-Mail verschickt werden soll (Ankunft kann sich um ca. eine Minute verz&ouml;gern)</li><li>Dateiname &rarr; Name der Datei, die der Bericht ausgeben soll (Die Endung des entsprechenden Dateityps muss mit angef&uuml;gt werden, also z.B. .csv oder .txt)</li></ul><br /><img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=berichte&amp;fileid=21" />Damit das Verschicken der E-Mails funktioniert, muss der Prozessstarter Berichte FTP &Uuml;bertragungen aktiv und richtig konfiguriert sein. So k&ouml;nnten die Einstellungen aussehen:<img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=berichte&amp;fileid=22" /><h1>Beispielberichte</h1><h2>ZM</h2><br /><code>SELECT belegnr, datum, name, kundennummer, land, ustid, SUM(soll) as sollFROM rechnungWHERE land != &#39;{LAND}&#39; AND land IN ({EULAENDER}) AND status != &#39;angelegt&#39; AND ustid != <em> AND datum &gt;= &#39;{DATUMVON}&#39; AND datum &lt;= &#39;{DATUMBIS}&#39;GROUP BY ustid</em></code><br /><br /><strong>Variablen:</strong><br /><code>{LAND} = DE;{DATUMVON} = 2019-01-01;{DATUMBIS} = 2019-12-31;{EULAENDER} = &#39;AT&#39;,&#39;BE&#39;,&#39;BG&#39;,&#39;CY&#39;,&#39;CZ&#39;,&#39;DE&#39;,&#39;DK&#39;,&#39;EE&#39;,&#39;ES&#39;,&#39;FI&#39;,&#39;FR&#39;,&#39;GB&#39;,&#39;GR&#39;,&#39;HR&#39;,&#39;HU&#39;,&#39;IE&#39;,&#39;IT&#39;,&#39;LT&#39;,&#39;LU&#39;,&#39;LV&#39;,&#39;MT&#39;,&#39;NL&#39;,&#39;PL&#39;,&#39;PT&#39;,&#39;RO&#39;,&#39;SE&#39;,&#39;SI&#39;,&#39;SK&#39;;</code><br /><br /><strong>Spaltenname:</strong><br /><code>Rechnung;Datum;Kunden;Kdnr;Land;USTID;Betrag</code><br /><br /><strong>Spaltenbreite:</strong><br /><code>20;25;65;15;10;30;25</code><br /><br /><strong>Spaltenausrichtung:</strong><br /><code>L;L;L;L;L;L;L</code><br /><br /><strong>Hinweis: </strong>Wollen Sie bei den Zahlen statt einem Punkt eher ein Komma haben (bsp: 13,10 statt 13.10), dann m&uuml;ssten Sie die Struktur entsprechend &auml;ndern:<br /><code>FORMAT(soll,2,&#39;de_DE&#39;)</code><h2><br />Verkaufte Artikel (Ger&auml;t) ins Ausland</h2><code>SELECT lieferschein_position.nummer,lieferschein_position.bezeichnung,lieferschein.land,round(auftrag_position.preis,2),(auftrag_position.preis * lieferschein_position.menge),lieferschein.auftrag,DATE_FORMAT(lieferschein.datum,&#39;%d.%m.%Y&#39;),artikel.geraet,lieferschein_position.mengeFROM lieferschein_positionLEFT JOIN lieferschein ON lieferschein.id=lieferschein_position.lieferscheinLEFT JOIN artikel ON artikel.id=lieferschein_position.artikelLEFT JOIN auftrag_position ON auftrag_position.id=lieferschein_position.auftrag_position_idWHERE artikel.geraet=1 AND lieferschein.land!=&#39;DE&#39;AND lieferschein.datum &gt;=&#39;2016-01-01&#39; AND lieferschein.datum &lt; &#39;2016-07-31&#39;</code><br /><br /><strong>Spaltennamen:</strong><br /><code>Artikelnummer;Artikelbezeichnung;Land;AB Preis;AB;Datum;Ger&auml;t;Menge</code><br /><br /><strong>Spaltenbreite:</strong><br /><code>20;50;10;20;20;20;20;20</code><br /><br /><strong>Spaltenausrichtung:</strong><br /><code>L;L;L;L;L;L;L;L</code><br />&nbsp;<h2>Lieferschein mit Lieferadresse und Produkt</h2><ul><li>Lieferadresse des Kunden</li><li>Alle Kunden die ein bestimmtes Produkt bestellt haben (Artikel ID)</li><li>Lieferscheine &uuml;ber einen bestimmten Datumsbereich</li></ul><br /><img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=berichte&amp;fileid=23" width="700" /><br /><br /><code>SELECT l.belegnr,l.datum,l.name,l.ansprechpartner,l.abteilung,l.unterabteilung,l.adresszusatz,l.land,l.strasse,l.plz,l.ort, a.name_de,a.nummer FROM lieferschein l LEFT JOIN lieferschein_position lp ON lp.lieferschein=l.id LEFT JOIN artikel a ON a.id=lp.artikel WHERE lp.artikel=212 AND l.datum&gt;=&#39;2017-08-01&#39; AND l.datum &lt;=&#39;2017-12-31&#39; ANDl.status=&#39;versendet&#39;</code><br />&nbsp;<h2>Lagerbestand frei verf&uuml;gbare Artikel</h2><code>SELECT a.nummer,a.name_de,TRIM(IFNULL((SELECT SUM(lpi.menge) FROM lager_platz_inhalt lpi WHERE lpi.artikel=a.id),0)-IFNULL((SELECT SUM(ap.menge) FROM auftrag_position ap LEFT JOIN auftrag auf ON auf.id=ap.auftrag WHERE ap.artikel=a.id AND (auf.status=&#39;freigegeben&#39; OR auf.status=&#39;versendet&#39;)),0))+0 FROM artikel a WHERE a.geloescht!=1</code><h2><br />Alle Artikel mit Fremdnummern</h2><code>SELECT artikel.nummer, artikel.name_de, artikelnummer_fremdnummern.nummer as fremdnummer, artikelnummer_fremdnummern.bezeichnung FROM artikelnummer_fremdnummern LEFT JOIN artikel ON artikel.id=artikelnummer_fremdnummern.artikel</code><h2>Alle Kunden mit letztem Bestelldatum</h2><code>SELECT MAX(datum), name, kundennummer FROM auftrag WHERE status!=&#39;angelegt&#39; AND datum &gt;=&#39;2018-01-01&#39; AND datum&lt;&#39;2018-04-01&#39; GROUP by adresse</code><br />&nbsp;<h2 style="font-style:italic;"><code>Mit Ausgabe Projekt und Projekt </code></h2><code>IDSELECT MAX(a.datum), a.name, a.kundennummer , p.abkuerzung FROM auftrag a LEFT JOIN projekt p ON p.id=a.projekt WHERE a.status!=&#39;angelegt&#39; AND a.datum &gt;=&#39;2018-01-01&#39; AND a.projekt=&#39;1&#39; AND a.datum&lt;&#39;2018-04-01&#39; GROUP by a.adresse​​​​</code><br />&nbsp;<h2>Rechnung mit manueller Zahlungsfestsetzung</h2><ul><li>Info: liefert alle Rechnungen als Bericht, die den Haken &quot;Alle Einstellungen manuell festsetzen&quot; gesetzt haben.</li><li>als .csv anzeigen verwenden.</li></ul><br /><strong>Struktur:</strong><br /><code>SELECT r.belegnr,r.datum,r.name FROM rechnung r WHERE r.mahnwesenfestsetzen=&#39;1&#39;</code><br /><br /><img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=berichte&amp;fileid=24" /><h1>Live Tabelle</h1>Es ist auch m&ouml;glich sich die selbstgeschriebenen Berichte als Live-Tabellen (wie z.B. im Auftrag, Adressen, etc) anzeigen zu lassen.<br /><br /><img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=berichte&amp;fileid=25" />Einstellungen dazu:<img src="index.php?module=wiki&amp;action=getfile&amp;workspacefolder=XentralHandbuch&amp;article=berichte&amp;fileid=26" /><br /><br /><strong>Hinweis: </strong>Brauchen Sie eine speziellen Bericht, k&ouml;nnen Sie sich gerne an unseren Vertrieb wenden, damit wir Sie mit dem SQL Statement unterst&uuml;tzen k&ouml;nnen.<h2>Links einbauen in die Live-Tabelle</h2><p>Dazu m&uuml;ssen Sie die entsprechende Spalte mit einem CONCAT Befehl erweitern und die zu aufrufende URL damit bauen.</p>Beispiel: Sie wollen aus der Artikelnummer einen Link machen<br /><br />Alt:<br /><code>SELECT a.nummer FROM ...</code><br /><br />Neu:<pre><span class="wiki-text">SELECT CONCAT(&#39;&lt;a href=&quot;/helpdesk?module=artikel&amp;action=edit&amp;id=&#39;,a.id,&#39;&quot;&gt;&#39;,a.nummer,&#39;&lt;/a&gt;&#39;) FROM ...</span></pre><br /><br />Damit erhalten Sie in der Live-Tabelle einen Link, der Sie direkt auf die Artikelseite bringt.